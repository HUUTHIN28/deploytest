import{p as q,u as g,a as b,r as d,n as F,b as A,j as s,T as E,c as O,d as Q,e as y,O as T,h as a}from"./index-69899445.js";function L(t,o,r){const[c,u={}]=q(t,o,r),i=g({context:u.context}),n=i.getQueryCache();return b(d.useCallback(l=>n.subscribe(F.batchCalls(l)),[n]),()=>i.isFetching(c),()=>i.isFetching(c))}function N(t,o,r){const[c,u={}]=A(t,o,r),i=g({context:u.context}),n=i.getMutationCache();return b(d.useCallback(l=>n.subscribe(F.batchCalls(l)),[n]),()=>i.isMutating(c),()=>i.isMutating(c))}const D=()=>s.jsx("div",{children:"OtherComponent "}),I=()=>{const t=d.useContext(E),o=()=>{t.setThem("hhhhuuuuu")};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:["AnotherComponent ",t==null?void 0:t.them]}),s.jsx("button",{onClick:o,children:"Save"})]})},P=()=>{var m,j,C,p,f;const[t,o]=d.useState(0),r=O(),c=g(),u=L(),i=N();console.log("isFetching",u),console.log("isMutating",i);const{data:n,isLoading:l}=Q({queryKey:["house",t],queryFn:()=>a.getHome({limit:5,offset:t*5}),staleTime:60*1e3,keepPreviousData:!0});console.log("data",(j=(m=n==null?void 0:n.data)==null?void 0:m.listhouse)==null?void 0:j.house),console.log("isLoading",l);const k=y({mutationFn:e=>a.postHouse(e)}),M=y({mutationFn:e=>a.deleteHouse({id:e}),onSuccess:()=>{c.invalidateQueries({queryKey:["house",t]})}}),S=e=>{M.mutate(e)},H=e=>{c.prefetchQuery(["detailHouse",String(e)],{queryFn:()=>a.detailHouse({id:e}),staleTime:60*1e3})};return s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("div",{children:s.jsx("button",{onClick:()=>{o(0)},children:"1"})}),s.jsx("div",{children:s.jsx("button",{onClick:()=>{o(1)},children:"2"})}),s.jsx("div",{children:s.jsx("button",{onClick:()=>{o(2)},children:"3"})})]}),s.jsx("button",{onClick:()=>{k.mutate({phone:+"0395181835",name:"Nguyễn 1234 hưudgdfgfdfdfdf thin123",address:"xóm 9123"},{onError:(e,h,x)=>{console.log("error",e),console.log("context",x),console.log("variables",h)},onSuccess:(e,h,x)=>{console.log("Successerror",e),console.log("Successcontext",x),console.log("Successvariables",h)}})},children:"addhouse"}),s.jsxs("div",{children:[s.jsx("h1",{children:" List House"}),(f=(p=(C=n==null?void 0:n.data)==null?void 0:C.listhouse)==null?void 0:p.house)==null?void 0:f.map(e=>s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("div",{children:e==null?void 0:e.id}),s.jsx("div",{onMouseEnter:()=>H(e==null?void 0:e.id),children:e==null?void 0:e.phone}),s.jsx("div",{children:e==null?void 0:e.address}),s.jsx("div",{children:e==null?void 0:e.name}),s.jsx("div",{onClick:()=>{r(`/home/${e==null?void 0:e.id}`)},children:"detail"}),s.jsx("div",{onClick:()=>S(e==null?void 0:e.id),children:"delete"})]},e==null?void 0:e.id))]}),s.jsx(D,{}),s.jsx(I,{}),s.jsx(T,{})]})};export{P as default};
